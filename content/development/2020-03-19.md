---
title: Use Python requests to configure ACI
date: 2020-03-16T07:39:50+01:00
draft: false
categories:
  - Programming
tags:
  - ACI
  - Python
---

## Introduction


## Code to login to the APIC Controller

```python
import requests
import json

def get_token():  
   url = "https://10.48.109.10/api/aaaLogin.json"

   payload = {
      "aaaUser": {
         "attributes": {
            "name":"admin",
            "pwd":"C1sco123"
         }
      }
   }

   headers = {
      "Content-Type" : "application/json"
   }

   requests.packages.urllib3.disable_warnings()
   response = requests.post(url,data=json.dumps(payload), headers=headers, verify=False).json()

   token = response['imdata'][0]['aaaLogin']['attributes']['token']
   return token

def main():
   token = get_token()
   print("The token is: " + token)

if __name__ == "__main__":
   main()
```


When we execute the above script, we will print the token that is returned in the JSON body of the response.

```bash
(venv) WAUTERW-M-65P7:aci_rest_examples wauterw$ python3 aci_login.py 
6jUCAAAAAAAAAAAAAAAAABCOfgYX5j0IXhy0ZKPV7x05BEhyd00p5yVn9s59oAR5ZTlSjCZ9wlTY9VSEJbT2pJJPc02hfPsGh/2C1dmQHe9QmNuS9Qq5avaBcfoS12PUWi1rD4lnJ3ul0w4kfbNex/C2cg1g99v5BlSUa47PFbwsf78ig7Vdv8o0l2ZuxRFp3AF5uaN+1BtOxE9fGlw8JA==
```

## Code to create an ACI tenant
```python
import requests
import json
from aci_login import get_token

tenant_name = "Tenant_Python"

def main():
  
   token = get_token()

   url = "https://10.48.109.10/api/mo/uni.json"
   
   payload = {
      "fvTenant": {
         "attributes": {
            "name": tenant_name
         }
      }
   }

   headers = {
      "Cookie" : f"APIC-Cookie={token}", 
   }

   requests.packages.urllib3.disable_warnings()
   response = requests.post(url,data=json.dumps(payload), headers=headers, verify=False)

   if (response.status_code == 200):
      print("Tenant was successfully created")
   else:
      print("Issue with creating tenant")

def get_tenant():
   return tenant_name

if __name__ == "__main__":
   main()
```




https://github.com/wiwa1978/blog-hugo-netlify-code/tree/master/ACI_Python_Requests