---
title: RESTCONF intro with Postman
date: 2020-04-02T12:32:50+01:00
draft: false
categories:
  - Network Programmability
tags:
  - IOS XE
  - Python
  - RESTCONF
  - YANG
---

## Capabilities
![Restconf](/images/2020-04-02-1.png)

## Use Case 1: retrieve device inventory

As part of the capabilities list, we see a YANG model called `"http://cisco.com/ns/yang/Cisco-IOS-XE-device-hardware-oper?module=Cisco-IOS-XE-device-hardware-oper&revision=2018-10-29"`. Let's say we want to check this out in more detail. To achieve that, we have to use the module name in the POSTMAN URL, which in this example would be `https://{{host}}:{{port}}/restconf/data/Cisco-IOS-XE-device-hardware-oper`. 

If we do that, you will see we get an error message.

![Restconf](/images/2020-04-02-2.png)

We need to specify what we are interested in. As we are using the `device-hardware` YANG model, let's we are interested to find a list of the various hardware components in our device (with serial numbers....)

There are multiple ways to go about. I usually go to a website called [YANG Search](https://yangcatalog.org/yang-search/). There is type in the name of the module I'm interested in. In our case that would be our module name, being `Cisco-IOS-XE-device-hardware-oper`.

![Restconf](/images/2020-04-02-3.png)

You will receive back a list of items that are supported by the YANG model. As we are interested in the hardware components, we search for the keyword `hardware` in the search box on the right (note: put the filter on name).

![Restconf](/images/2020-04-02-4.png)

We will get back 3 modules. We will dive in deeper into the `device-hardware-data` model. In the path column, you'll notice that we can retrieve the device hardware data by adding the `device-hardware-data` to our path. The full POSTMAN URL now becomes `https://{{host}}:{{port}}/restconf/data/Cisco-IOS-XE-device-hardware-oper:device-hardware-data`.

![Restconf](/images/2020-04-02-5.png)

You see that we receive now a complete list of hardware related data. In order to drill down further in the results, there are two ways:

###### A) Look at the POSTMAN response

In the POSTMAN response, you will see containers called `entity-information` and `device-hardware`. This means you can put them after the current URL. Our complete URL would then become `https://{{host}}:{{port}}/restconf/data/Cisco-IOS-XE-device-hardware-oper:device-hardware-data/device-hardware`.

###### B) Look at the YANG model website

In the search results (see screenshot above), there is 'module' column. In that column there is a tree view. When you click on that, you get back an overview of the containers. See screenshot below:

![Restconf](/images/2020-04-02-6.png)

Both methods work well. In any case, we now know the container we can add to our URL. The full URL to be used in POSTMAN would now be `https://{{host}}:{{port}}/restconf/data/Cisco-IOS-XE-device-hardware-oper:device-hardware-data/device-hardware/device-inventory`. Let's try it out.

![Restconf](/images/2020-04-02-7.png)

And here you have a list of your devic. inventory including the serial numbers.

## Use Case 2: retrieve interface information with IETF YANG model

In the capabilities list (see first screenshot in this blog post), we also got a module called `"urn:ietf:params:xml:ns:yang:ietf-interfaces?module=ietf-interfaces&revision=2014-05-08&features=pre-provisioning,if-mib,arbitrary-names"`. The module name is called `ietf-interfaces`.

Let's go again to the [YANG Search website](https://yangcatalog.org/yang-search) and search for this module name.

![Restconf](/images/2020-04-02-8.png)

Let's search for 'interfaces' (as we are interested to retrieve interface information). We get back a list of containers as indicated in the screenshot below:

![Restconf](/images/2020-04-02-9.png)

The POSTMAN URL would now be `https://{{host}}:{{port}}/restconf/data/ietf-interfaces:interfaces`. 

![Restconf](/images/2020-04-02-10.png)

Let's look at the tree for the 'ietf-interfaces' module. 

![Restconf](/images/2020-04-02-11.png)

The POSTMAN URL would now be `https://{{host}}:{{port}}/restconf/data/ietf-interfaces:interfaces/interface`. 

![Restconf](/images/2020-04-02-12.png)

You see now an overview of all the interfaces of our device. Let's say we are interested in one particular interface. We can do this as follows: `https://{{host}}:{{port}}/restconf/data/ietf-interfaces:interfaces/interface=GigabitEthernet3`.

![Restconf](/images/2020-04-02-13.png)

## Use Case 3: retrieve interface information with Cisco YANG model

Sometimes there are multiple YANG models to achieve the same output. In use case 2, we retrieved a list of interfaces. We can also use a Cisco YANG model for this, e.g `Cisco-IOS-XE-interfaces-oper` (also retrieved from the capabilities list). We won't go through all the details using the YANG Search website as we did that already twice in use case 1 and 2. If you follow the same procedure, you will see that the URL can be `https://{{host}}:{{port}}/restconf/data/Cisco-IOS-XE-interfaces-oper:interfaces`.

![Restconf](/images/2020-04-02-14.png)

To list the details of a specific interface, use `https://{{host}}:{{port}}/restconf/data/Cisco-IOS-XE-interfaces-oper:interfaces/interface=GigabitEthernet3`.

![Restconf](/images/2020-04-02-15.png)

The Cisco YANG model is a bit different than the IETF YANG model, hence the data returned will also be a bit different.

