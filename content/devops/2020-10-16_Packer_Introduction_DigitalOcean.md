---
title: Packer Introduction with DigitalOcean
date: 2020-10-16T14:39:50+01:00
draft: False
categories:
  - Cloud
  - DevOps
  - All
tags:
  - Packer
  - AWS
---
### Introduction

In [this](http://blog.wimwauters.com/devops/2020-10-15_packer_introduction_aws/), we experimented a bit with Packer in combination with AWS. To get a general intro on Packer, go ahead and read that post first. Here will will focus on DigitalOcean instead of AWS.

### Generate a DigitalOcean API token

In your DigitalOcean account, go to the API section and generate a new API key for Packer.

![Packer](/images/2020-10-16-1.png)

Copy the value and insert it as an environment variable. The example below is for Mac.

```
~/Programming/Packer/DigitalOcean ❯ export do_token=61a7db31*********4531862cef4
```
### Packer Build file

Next, we are going to create the Packer Build file to create our template.

In the variables section, we read the value of the environment variable called `do_token` into a variable `do_token`. 

```json
    "variables": {
        "do_token": "{{env `do_token`}}"
    }
```
Next, in the builders section, we have the following. There are only very few required options. Check out [this](https://www.packer.io/docs/builders/digitalocean#required) link to verify them.

```json
    "builders": [
      {
        "type": "digitalocean",
        "api_token": "{{user `do_token`}}",
        "image": "ubuntu-16-04-x64",
        "ssh_username": "root",
        "region": "ams3",
        "size": "512mb"
      }
    ]
```
We essentially tell Packer to take the Ubuntu 16.04 image and use that as the basis for the template we are building. As I'm based in Europe, I'm also going to store the template in the AMS3 region.

Next, let's have a look at the provisioners section. In Packer, provisioners allow you to execute commands (or shell scripts). This allows for customization of the template. In our case, we are going to execute a shell script that installs nginx.
```
    "provisioners": [
      {
        "type": "file",
        "source": "do.json",
        "destination": "/tmp"
      },
      {
        "type": "shell",
        "scripts": [
            "scripts/nginx.sh"
        ]
      }]
  }
```

The shell file is pretty easy. See below:

```
#!/bin/bash
apt-get update -y
apt-get upgrade -y

apt-get install -y nginx

systemctl enable nginx
systemctl start nginx
```






```
~/SynologyDrive/Programming/Packer/DigitalOcean ❯ packer build do.json                                                                                 08:16:02
digitalocean: output will be in this color.

==> digitalocean: Creating temporary ssh key for droplet...
==> digitalocean: Creating droplet...
==> digitalocean: Waiting for droplet to become active...
==> digitalocean: Using ssh communicator to connect: 178.128.242.250
==> digitalocean: Waiting for SSH to become available...
==> digitalocean: Connected to SSH!
==> digitalocean: Uploading do.json => /tmp/do_bu.json
    digitalocean: do.json 545 B / 545 B [=====================================================================================================] 100.00% 0s
==> digitalocean: Provisioning with shell script: scripts/nginx.sh
    digitalocean: Get:1 http://security.ubuntu.com/ubuntu xenial-security InRelease [109 kB]
    digitalocean: Get:2 http://mirrors.digitalocean.com/ubuntu xenial InRelease [247 kB]
    digitalocean: Get:3 http://mirrors.digitalocean.com/ubuntu xenial-updates InRelease [109 kB]
    digitalocean: Get:4 http://mirrors.digitalocean.com/ubuntu xenial-backports InRelease [107 kB]
    digitalocean: Get:5 http://security.ubuntu.com/ubuntu xenial-security/main amd64 Packages [1,488 kB]
    digitalocean: Get:6 http://security.ubuntu.com/ubuntu xenial-security/main Translation-en [353 kB]
    digitalocean: Get:7 http://security.ubuntu.com/ubuntu xenial-security/universe amd64 Packages [774 kB]
    digitalocean: Get:8 http://security.ubuntu.com/ubuntu xenial-security/universe Translation-en [219 kB]
    digitalocean: Get:9 http://security.ubuntu.com/ubuntu xenial-security/multiverse amd64 Packages [8,232 B]
    digitalocean: Get:10 http://security.ubuntu.com/ubuntu xenial-security/multiverse Translation-en [2,888 B]
    digitalocean: Get:11 http://mirrors.digitalocean.com/ubuntu xenial/universe amd64 Packages [7,532 kB]
    digitalocean: Get:12 http://mirrors.digitalocean.com/ubuntu xenial/universe Translation-en [4,354 kB]
    digitalocean: Get:13 http://mirrors.digitalocean.com/ubuntu xenial/multiverse amd64 Packages [144 kB]
    digitalocean: Get:14 http://mirrors.digitalocean.com/ubuntu xenial/multiverse Translation-en [106 kB]
    digitalocean: Get:15 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 Packages [1,891 kB]
    digitalocean: Get:16 http://mirrors.digitalocean.com/ubuntu xenial-updates/main Translation-en [457 kB]
    digitalocean: Get:17 http://mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 Packages [1,196 kB]
    digitalocean: Get:18 http://mirrors.digitalocean.com/ubuntu xenial-updates/universe Translation-en [349 kB]
    digitalocean: Get:19 http://mirrors.digitalocean.com/ubuntu xenial-updates/multiverse amd64 Packages [23.0 kB]
    digitalocean: Get:20 http://mirrors.digitalocean.com/ubuntu xenial-updates/multiverse Translation-en [8,632 B]
    digitalocean: Get:21 http://mirrors.digitalocean.com/ubuntu xenial-backports/main amd64 Packages [9,812 B]
    digitalocean: Get:22 http://mirrors.digitalocean.com/ubuntu xenial-backports/main Translation-en [4,456 B]
    digitalocean: Get:23 http://mirrors.digitalocean.com/ubuntu xenial-backports/universe amd64 Packages [11.3 kB]
    digitalocean: Get:24 http://mirrors.digitalocean.com/ubuntu xenial-backports/universe Translation-en [4,476 B]
    digitalocean: Fetched 19.5 MB in 4s (4,804 kB/s)
    digitalocean: Reading package lists...
    digitalocean: Reading package lists...
    digitalocean: Building dependency tree...
    digitalocean: Reading state information...
    digitalocean: Calculating upgrade...
    digitalocean: The following packages have been kept back:
    digitalocean:   linux-headers-generic linux-headers-virtual linux-image-virtual
    digitalocean:   linux-virtual
    digitalocean: The following packages will be upgraded:
    digitalocean:   accountsservice apport ca-certificates distro-info-data libaccountsservice0
    digitalocean:   libfreetype6 libldap-2.4-2 libperl5.22 libpython3.5 libpython3.5-minimal
    digitalocean:   libpython3.5-stdlib perl perl-base perl-modules-5.22 python3-apport
    digitalocean:   python3-cryptography python3-distupgrade python3-problem-report python3.5
    digitalocean:   python3.5-minimal snapd tzdata ubuntu-core-launcher
    digitalocean:   ubuntu-release-upgrader-core vim vim-common vim-runtime vim-tiny
    digitalocean: 28 upgraded, 0 newly installed, 0 to remove and 4 not upgraded.
    digitalocean: Need to get 41.6 MB of archives.
    digitalocean: After this operation, 3,147 kB of additional disk space will be used.
    digitalocean: Get:1 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libperl5.22 amd64 5.22.1-9ubuntu0.9 [3,360 kB]
    digitalocean: Get:2 http://security.ubuntu.com/ubuntu xenial-security/main amd64 python3-problem-report all 2.20.1-0ubuntu2.27 [10.7 kB]
    digitalocean: Get:3 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 perl amd64 5.22.1-9ubuntu0.9 [237 kB]
    digitalocean: Get:4 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 perl-base amd64 5.22.1-9ubuntu0.9 [1,287 kB]
    digitalocean: Get:5 http://security.ubuntu.com/ubuntu xenial-security/main amd64 python3-apport all 2.20.1-0ubuntu2.27 [80.2 kB]
    digitalocean: Get:6 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 perl-modules-5.22 all 5.22.1-9ubuntu0.9 [2,634 kB]
    digitalocean: Get:7 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libpython3.5 amd64 3.5.2-2ubuntu0~16.04.12 [1,360 kB]
    digitalocean: Get:8 http://security.ubuntu.com/ubuntu xenial-security/main amd64 apport all 2.20.1-0ubuntu2.27 [122 kB]
    digitalocean: Get:9 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 python3.5 amd64 3.5.2-2ubuntu0~16.04.12 [165 kB]
    digitalocean: Get:10 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libpython3.5-stdlib amd64 3.5.2-2ubuntu0~16.04.12 [2,131 kB]
    digitalocean: Get:11 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 python3.5-minimal amd64 3.5.2-2ubuntu0~16.04.12 [1,598 kB]
    digitalocean: Get:12 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libpython3.5-minimal amd64 3.5.2-2ubuntu0~16.04.12 [524 kB]
    digitalocean: Get:13 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ca-certificates all 20201027ubuntu0.16.04.1 [155 kB]
    digitalocean: Get:14 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ubuntu-core-launcher amd64 2.47.1 [1,568 B]
    digitalocean: Get:15 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 snapd amd64 2.47.1 [20.1 MB]
    digitalocean: Get:16 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 tzdata all 2020d-0ubuntu0.16.04 [167 kB]
    digitalocean: Get:17 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 distro-info-data all 0.28ubuntu0.16 [4,644 B]
    digitalocean: Get:18 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 vim amd64 2:7.4.1689-3ubuntu1.5 [1,036 kB]
    digitalocean: Get:19 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 vim-tiny amd64 2:7.4.1689-3ubuntu1.5 [445 kB]
    digitalocean: Get:20 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 vim-runtime all 2:7.4.1689-3ubuntu1.5 [5,169 kB]
    digitalocean: Get:21 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 vim-common amd64 2:7.4.1689-3ubuntu1.5 [104 kB]
    digitalocean: Get:22 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 accountsservice amd64 0.6.40-2ubuntu11.6 [56.1 kB]
    digitalocean: Get:23 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libaccountsservice0 amd64 0.6.40-2ubuntu11.6 [68.8 kB]
    digitalocean: Get:24 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libldap-2.4-2 amd64 2.4.42+dfsg-2ubuntu3.10 [159 kB]
    digitalocean: Get:25 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ubuntu-release-upgrader-core all 1:16.04.32 [30.6 kB]
    digitalocean: Get:26 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 python3-distupgrade all 1:16.04.32 [104 kB]
    digitalocean: Get:27 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libfreetype6 amd64 2.6.1-0.1ubuntu2.5 [316 kB]
    digitalocean: Get:28 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 python3-cryptography amd64 1.2.3-1ubuntu0.3 [198 kB]
==> digitalocean: debconf: unable to initialize frontend: Dialog
==> digitalocean: debconf: (TERM is not set, so the dialog frontend is not usable.)
==> digitalocean: debconf: falling back to frontend: Readline
==> digitalocean: debconf: unable to initialize frontend: Readline
==> digitalocean: debconf: (This frontend requires a controlling tty.)
==> digitalocean: debconf: falling back to frontend: Teletype
==> digitalocean: dpkg-preconfigure: unable to re-open stdin:
    digitalocean: Fetched 41.6 MB in 1s (24.9 MB/s)
    digitalocean: (Reading database ... 54307 files and directories currently installed.)
    digitalocean: Preparing to unpack .../libperl5.22_5.22.1-9ubuntu0.9_amd64.deb ...
    digitalocean: Unpacking libperl5.22:amd64 (5.22.1-9ubuntu0.9) over (5.22.1-9ubuntu0.6) ...
    digitalocean: Preparing to unpack .../perl_5.22.1-9ubuntu0.9_amd64.deb ...
    digitalocean: Unpacking perl (5.22.1-9ubuntu0.9) over (5.22.1-9ubuntu0.6) ...
    digitalocean: Preparing to unpack .../perl-base_5.22.1-9ubuntu0.9_amd64.deb ...
    digitalocean: Unpacking perl-base (5.22.1-9ubuntu0.9) over (5.22.1-9ubuntu0.6) ...
    digitalocean: Processing triggers for man-db (2.7.5-1) ...
    digitalocean: Setting up perl-base (5.22.1-9ubuntu0.9) ...
    digitalocean: (Reading database ... 54307 files and directories currently installed.)
    digitalocean: Preparing to unpack .../perl-modules-5.22_5.22.1-9ubuntu0.9_all.deb ...
    digitalocean: Unpacking perl-modules-5.22 (5.22.1-9ubuntu0.9) over (5.22.1-9ubuntu0.6) ...
    digitalocean: Preparing to unpack .../libpython3.5_3.5.2-2ubuntu0~16.04.12_amd64.deb ...
    digitalocean: Unpacking libpython3.5:amd64 (3.5.2-2ubuntu0~16.04.12) over (3.5.2-2ubuntu0~16.04.11) ...
    digitalocean: Preparing to unpack .../python3.5_3.5.2-2ubuntu0~16.04.12_amd64.deb ...
    digitalocean: Unpacking python3.5 (3.5.2-2ubuntu0~16.04.12) over (3.5.2-2ubuntu0~16.04.11) ...
    digitalocean: Preparing to unpack .../libpython3.5-stdlib_3.5.2-2ubuntu0~16.04.12_amd64.deb ...
    digitalocean: Unpacking libpython3.5-stdlib:amd64 (3.5.2-2ubuntu0~16.04.12) over (3.5.2-2ubuntu0~16.04.11) ...
    digitalocean: Preparing to unpack .../python3.5-minimal_3.5.2-2ubuntu0~16.04.12_amd64.deb ...
    digitalocean: Unpacking python3.5-minimal (3.5.2-2ubuntu0~16.04.12) over (3.5.2-2ubuntu0~16.04.11) ...
    digitalocean: Preparing to unpack .../libpython3.5-minimal_3.5.2-2ubuntu0~16.04.12_amd64.deb ...
    digitalocean: Unpacking libpython3.5-minimal:amd64 (3.5.2-2ubuntu0~16.04.12) over (3.5.2-2ubuntu0~16.04.11) ...
    digitalocean: Preparing to unpack .../ca-certificates_20201027ubuntu0.16.04.1_all.deb ...
    digitalocean: Unpacking ca-certificates (20201027ubuntu0.16.04.1) over (20190110~16.04.1) ...
    digitalocean: Preparing to unpack .../ubuntu-core-launcher_2.47.1_amd64.deb ...
    digitalocean: Unpacking ubuntu-core-launcher (2.47.1) over (2.46.1) ...
    digitalocean: Preparing to unpack .../snapd_2.47.1_amd64.deb ...
    digitalocean: Unpacking snapd (2.47.1) over (2.46.1) ...
    digitalocean: Preparing to unpack .../tzdata_2020d-0ubuntu0.16.04_all.deb ...
    digitalocean: Unpacking tzdata (2020d-0ubuntu0.16.04) over (2020a-0ubuntu0.16.04) ...
    digitalocean: Preparing to unpack .../distro-info-data_0.28ubuntu0.16_all.deb ...
    digitalocean: Unpacking distro-info-data (0.28ubuntu0.16) over (0.28ubuntu0.14) ...
    digitalocean: Preparing to unpack .../vim_2%3a7.4.1689-3ubuntu1.5_amd64.deb ...
    digitalocean: Unpacking vim (2:7.4.1689-3ubuntu1.5) over (2:7.4.1689-3ubuntu1.4) ...
    digitalocean: Preparing to unpack .../vim-tiny_2%3a7.4.1689-3ubuntu1.5_amd64.deb ...
    digitalocean: Unpacking vim-tiny (2:7.4.1689-3ubuntu1.5) over (2:7.4.1689-3ubuntu1.4) ...
    digitalocean: Preparing to unpack .../vim-runtime_2%3a7.4.1689-3ubuntu1.5_all.deb ...
    digitalocean: Unpacking vim-runtime (2:7.4.1689-3ubuntu1.5) over (2:7.4.1689-3ubuntu1.4) ...
    digitalocean: Preparing to unpack .../vim-common_2%3a7.4.1689-3ubuntu1.5_amd64.deb ...
    digitalocean: Unpacking vim-common (2:7.4.1689-3ubuntu1.5) over (2:7.4.1689-3ubuntu1.4) ...
    digitalocean: Preparing to unpack .../accountsservice_0.6.40-2ubuntu11.6_amd64.deb ...
    digitalocean: Unpacking accountsservice (0.6.40-2ubuntu11.6) over (0.6.40-2ubuntu11.3) ...
    digitalocean: Preparing to unpack .../libaccountsservice0_0.6.40-2ubuntu11.6_amd64.deb ...
    digitalocean: Unpacking libaccountsservice0:amd64 (0.6.40-2ubuntu11.6) over (0.6.40-2ubuntu11.3) ...
    digitalocean: Preparing to unpack .../libldap-2.4-2_2.4.42+dfsg-2ubuntu3.10_amd64.deb ...
    digitalocean: Unpacking libldap-2.4-2:amd64 (2.4.42+dfsg-2ubuntu3.10) over (2.4.42+dfsg-2ubuntu3.9) ...
    digitalocean: Preparing to unpack .../ubuntu-release-upgrader-core_1%3a16.04.32_all.deb ...
    digitalocean: Unpacking ubuntu-release-upgrader-core (1:16.04.32) over (1:16.04.30) ...
    digitalocean: Preparing to unpack .../python3-distupgrade_1%3a16.04.32_all.deb ...
    digitalocean: Unpacking python3-distupgrade (1:16.04.32) over (1:16.04.30) ...
    digitalocean: Preparing to unpack .../python3-problem-report_2.20.1-0ubuntu2.27_all.deb ...
    digitalocean: Unpacking python3-problem-report (2.20.1-0ubuntu2.27) over (2.20.1-0ubuntu2.25) ...
    digitalocean: Preparing to unpack .../python3-apport_2.20.1-0ubuntu2.27_all.deb ...
    digitalocean: Unpacking python3-apport (2.20.1-0ubuntu2.27) over (2.20.1-0ubuntu2.25) ...
    digitalocean: Preparing to unpack .../apport_2.20.1-0ubuntu2.27_all.deb ...
    digitalocean: Unpacking apport (2.20.1-0ubuntu2.27) over (2.20.1-0ubuntu2.25) ...
    digitalocean: Preparing to unpack .../libfreetype6_2.6.1-0.1ubuntu2.5_amd64.deb ...
    digitalocean: Unpacking libfreetype6:amd64 (2.6.1-0.1ubuntu2.5) over (2.6.1-0.1ubuntu2.4) ...
    digitalocean: Preparing to unpack .../python3-cryptography_1.2.3-1ubuntu0.3_amd64.deb ...
    digitalocean: Unpacking python3-cryptography (1.2.3-1ubuntu0.3) over (1.2.3-1ubuntu0.2) ...
    digitalocean: Processing triggers for libc-bin (2.23-0ubuntu11.2) ...
    digitalocean: Processing triggers for man-db (2.7.5-1) ...
    digitalocean: Processing triggers for mime-support (3.59ubuntu1) ...
    digitalocean: Processing triggers for dbus (1.10.6-1ubuntu3.6) ...
    digitalocean: Processing triggers for ureadahead (0.100.0-19.1) ...
    digitalocean: Processing triggers for systemd (229-4ubuntu21.29) ...
    digitalocean: Setting up perl-modules-5.22 (5.22.1-9ubuntu0.9) ...
    digitalocean: Setting up libperl5.22:amd64 (5.22.1-9ubuntu0.9) ...
    digitalocean: Setting up perl (5.22.1-9ubuntu0.9) ...
    digitalocean: Setting up libpython3.5-minimal:amd64 (3.5.2-2ubuntu0~16.04.12) ...
    digitalocean: Setting up libpython3.5-stdlib:amd64 (3.5.2-2ubuntu0~16.04.12) ...
    digitalocean: Setting up libpython3.5:amd64 (3.5.2-2ubuntu0~16.04.12) ...
    digitalocean: Setting up python3.5-minimal (3.5.2-2ubuntu0~16.04.12) ...
    digitalocean: Setting up python3.5 (3.5.2-2ubuntu0~16.04.12) ...
    digitalocean: Setting up ca-certificates (20201027ubuntu0.16.04.1) ...
    digitalocean: debconf: unable to initialize frontend: Dialog
    digitalocean: debconf: (TERM is not set, so the dialog frontend is not usable.)
    digitalocean: debconf: falling back to frontend: Readline
    digitalocean: Setting up snapd (2.47.1) ...
    digitalocean: Installing new version of config file /etc/apparmor.d/usr.lib.snapd.snap-confine.real ...
    digitalocean: snapd.failure.service is a disabled or a static unit, not starting it.
    digitalocean: snapd.snap-repair.service is a disabled or a static unit, not starting it.
    digitalocean: Setting up ubuntu-core-launcher (2.47.1) ...
    digitalocean: Setting up tzdata (2020d-0ubuntu0.16.04) ...
    digitalocean: debconf: unable to initialize frontend: Dialog
    digitalocean: debconf: (TERM is not set, so the dialog frontend is not usable.)
    digitalocean: debconf: falling back to frontend: Readline
    digitalocean:
    digitalocean: Current default time zone: 'Etc/UTC'
    digitalocean: Local time is now:      Fri Nov 13 07:18:27 UTC 2020.
    digitalocean: Universal Time is now:  Fri Nov 13 07:18:27 UTC 2020.
    digitalocean: Run 'dpkg-reconfigure tzdata' if you wish to change it.
    digitalocean:
    digitalocean: Setting up distro-info-data (0.28ubuntu0.16) ...
    digitalocean: Setting up vim-common (2:7.4.1689-3ubuntu1.5) ...
    digitalocean: Setting up vim-runtime (2:7.4.1689-3ubuntu1.5) ...
    digitalocean: Setting up vim (2:7.4.1689-3ubuntu1.5) ...
    digitalocean: Setting up vim-tiny (2:7.4.1689-3ubuntu1.5) ...
    digitalocean: Setting up libaccountsservice0:amd64 (0.6.40-2ubuntu11.6) ...
    digitalocean: Setting up accountsservice (0.6.40-2ubuntu11.6) ...
    digitalocean: Setting up libldap-2.4-2:amd64 (2.4.42+dfsg-2ubuntu3.10) ...
    digitalocean: Setting up python3-distupgrade (1:16.04.32) ...
    digitalocean: Setting up ubuntu-release-upgrader-core (1:16.04.32) ...
    digitalocean: Setting up python3-problem-report (2.20.1-0ubuntu2.27) ...
    digitalocean: Setting up python3-apport (2.20.1-0ubuntu2.27) ...
    digitalocean: Setting up apport (2.20.1-0ubuntu2.27) ...
    digitalocean: Setting up libfreetype6:amd64 (2.6.1-0.1ubuntu2.5) ...
    digitalocean: Setting up python3-cryptography (1.2.3-1ubuntu0.3) ...
    digitalocean: Processing triggers for libc-bin (2.23-0ubuntu11.2) ...
    digitalocean: Processing triggers for ca-certificates (20201027ubuntu0.16.04.1) ...
    digitalocean: Updating certificates in /etc/ssl/certs...
    digitalocean: 20 added, 9 removed; done.
    digitalocean: Running hooks in /etc/ca-certificates/update.d...
    digitalocean: done.
    digitalocean: Reading package lists...
    digitalocean: Building dependency tree...
    digitalocean: Reading state information...
    digitalocean: The following additional packages will be installed:
    digitalocean:   fontconfig-config fonts-dejavu-core libfontconfig1 libgd3 libjbig0
    digitalocean:   libjpeg-turbo8 libjpeg8 libtiff5 libvpx3 libxpm4 nginx-common nginx-core
    digitalocean: Suggested packages:
    digitalocean:   libgd-tools fcgiwrap nginx-doc ssl-cert
    digitalocean: The following NEW packages will be installed:
    digitalocean:   fontconfig-config fonts-dejavu-core libfontconfig1 libgd3 libjbig0
    digitalocean:   libjpeg-turbo8 libjpeg8 libtiff5 libvpx3 libxpm4 nginx nginx-common
    digitalocean:   nginx-core
    digitalocean: 0 upgraded, 13 newly installed, 0 to remove and 4 not upgraded.
    digitalocean: Need to get 2,860 kB of archives.
    digitalocean: After this operation, 9,315 kB of additional disk space will be used.
    digitalocean: Get:1 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libjpeg-turbo8 amd64 1.4.2-0ubuntu3.4 [111 kB]
    digitalocean: Get:2 http://mirrors.digitalocean.com/ubuntu xenial/main amd64 libjbig0 amd64 2.1-3.1 [26.6 kB]
    digitalocean: Get:3 http://mirrors.digitalocean.com/ubuntu xenial/main amd64 fonts-dejavu-core all 2.35-1 [1,039 kB]
    digitalocean: Get:4 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 fontconfig-config all 2.11.94-0ubuntu1.1 [49.9 kB]
    digitalocean: Get:5 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libfontconfig1 amd64 2.11.94-0ubuntu1.1 [131 kB]
    digitalocean: Get:6 http://mirrors.digitalocean.com/ubuntu xenial/main amd64 libjpeg8 amd64 8c-2ubuntu8 [2,194 B]
    digitalocean: Get:7 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libtiff5 amd64 4.0.6-1ubuntu0.7 [149 kB]
    digitalocean: Get:8 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libvpx3 amd64 1.5.0-2ubuntu1.1 [732 kB]
    digitalocean: Get:9 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libxpm4 amd64 1:3.5.11-1ubuntu0.16.04.1 [33.8 kB]
    digitalocean: Get:10 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 libgd3 amd64 2.1.1-4ubuntu0.16.04.12 [126 kB]
    digitalocean: Get:11 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 nginx-common all 1.10.3-0ubuntu0.16.04.5 [26.9 kB]
    digitalocean: Get:12 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 nginx-core amd64 1.10.3-0ubuntu0.16.04.5 [429 kB]
    digitalocean: Get:13 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 nginx all 1.10.3-0ubuntu0.16.04.5 [3,494 B]
==> digitalocean: debconf: unable to initialize frontend: Dialog
==> digitalocean: debconf: (TERM is not set, so the dialog frontend is not usable.)
==> digitalocean: debconf: falling back to frontend: Readline
==> digitalocean: debconf: unable to initialize frontend: Readline
==> digitalocean: debconf: (This frontend requires a controlling tty.)
==> digitalocean: debconf: falling back to frontend: Teletype
==> digitalocean: dpkg-preconfigure: unable to re-open stdin:
    digitalocean: Fetched 2,860 kB in 0s (5,855 kB/s)
    digitalocean: Selecting previously unselected package libjpeg-turbo8:amd64.
    digitalocean: (Reading database ... 54315 files and directories currently installed.)
    digitalocean: Preparing to unpack .../libjpeg-turbo8_1.4.2-0ubuntu3.4_amd64.deb ...
    digitalocean: Unpacking libjpeg-turbo8:amd64 (1.4.2-0ubuntu3.4) ...
    digitalocean: Selecting previously unselected package libjbig0:amd64.
    digitalocean: Preparing to unpack .../libjbig0_2.1-3.1_amd64.deb ...
    digitalocean: Unpacking libjbig0:amd64 (2.1-3.1) ...
    digitalocean: Selecting previously unselected package fonts-dejavu-core.
    digitalocean: Preparing to unpack .../fonts-dejavu-core_2.35-1_all.deb ...
    digitalocean: Unpacking fonts-dejavu-core (2.35-1) ...
    digitalocean: Selecting previously unselected package fontconfig-config.
    digitalocean: Preparing to unpack .../fontconfig-config_2.11.94-0ubuntu1.1_all.deb ...
    digitalocean: Unpacking fontconfig-config (2.11.94-0ubuntu1.1) ...
    digitalocean: Selecting previously unselected package libfontconfig1:amd64.
    digitalocean: Preparing to unpack .../libfontconfig1_2.11.94-0ubuntu1.1_amd64.deb ...
    digitalocean: Unpacking libfontconfig1:amd64 (2.11.94-0ubuntu1.1) ...
    digitalocean: Selecting previously unselected package libjpeg8:amd64.
    digitalocean: Preparing to unpack .../libjpeg8_8c-2ubuntu8_amd64.deb ...
    digitalocean: Unpacking libjpeg8:amd64 (8c-2ubuntu8) ...
    digitalocean: Selecting previously unselected package libtiff5:amd64.
    digitalocean: Preparing to unpack .../libtiff5_4.0.6-1ubuntu0.7_amd64.deb ...
    digitalocean: Unpacking libtiff5:amd64 (4.0.6-1ubuntu0.7) ...
    digitalocean: Selecting previously unselected package libvpx3:amd64.
    digitalocean: Preparing to unpack .../libvpx3_1.5.0-2ubuntu1.1_amd64.deb ...
    digitalocean: Unpacking libvpx3:amd64 (1.5.0-2ubuntu1.1) ...
    digitalocean: Selecting previously unselected package libxpm4:amd64.
    digitalocean: Preparing to unpack .../libxpm4_1%3a3.5.11-1ubuntu0.16.04.1_amd64.deb ...
    digitalocean: Unpacking libxpm4:amd64 (1:3.5.11-1ubuntu0.16.04.1) ...
    digitalocean: Selecting previously unselected package libgd3:amd64.
    digitalocean: Preparing to unpack .../libgd3_2.1.1-4ubuntu0.16.04.12_amd64.deb ...
    digitalocean: Unpacking libgd3:amd64 (2.1.1-4ubuntu0.16.04.12) ...
    digitalocean: Selecting previously unselected package nginx-common.
    digitalocean: Preparing to unpack .../nginx-common_1.10.3-0ubuntu0.16.04.5_all.deb ...
    digitalocean: Unpacking nginx-common (1.10.3-0ubuntu0.16.04.5) ...
    digitalocean: Selecting previously unselected package nginx-core.
    digitalocean: Preparing to unpack .../nginx-core_1.10.3-0ubuntu0.16.04.5_amd64.deb ...
    digitalocean: Unpacking nginx-core (1.10.3-0ubuntu0.16.04.5) ...
    digitalocean: Selecting previously unselected package nginx.
    digitalocean: Preparing to unpack .../nginx_1.10.3-0ubuntu0.16.04.5_all.deb ...
    digitalocean: Unpacking nginx (1.10.3-0ubuntu0.16.04.5) ...
    digitalocean: Processing triggers for libc-bin (2.23-0ubuntu11.2) ...
    digitalocean: Processing triggers for man-db (2.7.5-1) ...
    digitalocean: Processing triggers for ureadahead (0.100.0-19.1) ...
    digitalocean: Processing triggers for systemd (229-4ubuntu21.29) ...
    digitalocean: Processing triggers for ufw (0.35-0ubuntu2) ...
    digitalocean: Setting up libjpeg-turbo8:amd64 (1.4.2-0ubuntu3.4) ...
    digitalocean: Setting up libjbig0:amd64 (2.1-3.1) ...
    digitalocean: Setting up fonts-dejavu-core (2.35-1) ...
    digitalocean: Setting up fontconfig-config (2.11.94-0ubuntu1.1) ...
    digitalocean: Setting up libfontconfig1:amd64 (2.11.94-0ubuntu1.1) ...
    digitalocean: Setting up libjpeg8:amd64 (8c-2ubuntu8) ...
    digitalocean: Setting up libtiff5:amd64 (4.0.6-1ubuntu0.7) ...
    digitalocean: Setting up libvpx3:amd64 (1.5.0-2ubuntu1.1) ...
    digitalocean: Setting up libxpm4:amd64 (1:3.5.11-1ubuntu0.16.04.1) ...
    digitalocean: Setting up libgd3:amd64 (2.1.1-4ubuntu0.16.04.12) ...
    digitalocean: Setting up nginx-common (1.10.3-0ubuntu0.16.04.5) ...
    digitalocean: debconf: unable to initialize frontend: Dialog
    digitalocean: debconf: (TERM is not set, so the dialog frontend is not usable.)
    digitalocean: debconf: falling back to frontend: Readline
    digitalocean: Setting up nginx-core (1.10.3-0ubuntu0.16.04.5) ...
    digitalocean: Setting up nginx (1.10.3-0ubuntu0.16.04.5) ...
    digitalocean: Processing triggers for libc-bin (2.23-0ubuntu11.2) ...
    digitalocean: Processing triggers for ureadahead (0.100.0-19.1) ...
    digitalocean: Processing triggers for systemd (229-4ubuntu21.29) ...
    digitalocean: Processing triggers for ufw (0.35-0ubuntu2) ...
==> digitalocean: Synchronizing state of nginx.service with SysV init with /lib/systemd/systemd-sysv-install...
==> digitalocean: Executing /lib/systemd/systemd-sysv-install enable nginx
==> digitalocean: Gracefully shutting down droplet...
==> digitalocean: Creating snapshot: packer-1605251841
==> digitalocean: Waiting for snapshot to complete...
==> digitalocean: Destroying droplet...
==> digitalocean: Deleting temporary ssh key...
Build 'digitalocean' finished after 2 minutes 28 seconds.

==> Wait completed after 2 minutes 28 seconds

==> Builds finished. The artifacts of successful builds are:
--> digitalocean: A snapshot was created: 'packer-1605251841' (ID: 73396684) in regions 'ams3'
```




